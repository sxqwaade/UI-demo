<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>无标题文档</title>
        <link rel="stylesheet" type="text/css" href="css/main.css"/>
        <script type="text/javascript" src="scripts/jquery-1.7.2.min.js"></script>
    </head>

    <body>
        <!--秒杀 begin -->
        <div class="" id="index_01_box1" leftSec="50000">
            <p class="p1">倒计时：</p>
            <ul class="ms">
                <li class="m_time" p="h1"></li>
                <li class="m_time" p="h2"></li>
                <li>:</li>
                <li class="m_time" p="m1"></li>
                <li class="m_time" p="m2"></li>
                <li>:</li>
                <li class="m_time" p="s1"></li>
                <li class="m_time" p="s2"></li>
            </ul>
        </div>
        <!--秒杀 end -->
    </body>
    <script type="text/javascript">
    	var index_01_box1 = $("#index_01_box1");
    	var num = parseInt(index_01_box1.attr("leftSec"));
    	//console.log($.data[index_01_box1])
    	function getDigit(val, index) {
		    if (0 == index) {
		        if (val < 10)
		            return 0;
		        else
		            return ("" + val).substring(0, 1);
		    } else {
		        if (val < 10)
		            return val;
		        else
		            return val % 10;
		    }
		}
    	function changeTime(obj, temId) {
			 //console.log(num)
			if (num<=0 ){
				num = 0;
				obj.find("li[p=s2]").removeClass().addClass("m_time").addClass("m_time_0");
				return ;
			}
			var h = Math.floor(num/60/60);
			if (h>99) h=99;
			var m = Math.floor(num/60%60);
			var s =  Math.floor(num%60);
			obj.find("li[p=h1]").removeClass().addClass("m_time").addClass("m_time_"+getDigit(h,0));
			obj.find("li[p=h2]").removeClass().addClass("m_time").addClass("m_time_"+getDigit(h,0));
			obj.find("li[p=m1]").removeClass().addClass("m_time").addClass("m_time_"+getDigit(m,0));
			obj.find("li[p=m2]").removeClass().addClass("m_time").addClass("m_time_"+getDigit(m,1));
			obj.find("li[p=s1]").removeClass().addClass("m_time").addClass("m_time_"+getDigit(s,0));
			obj.find("li[p=s2]").removeClass().addClass("m_time").addClass("m_time_"+getDigit(s,1));
		}
    	setInterval(function(){
    		--num;
    		changeTime($('.ms'), 'index_01_box1');
    	},1000);
    </script>
</html>
